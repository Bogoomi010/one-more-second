{"ast":null,"code":"var _jsxFileName = \"/Users/kbk-admin/one-more-second/src/pages/Game/components/CanvasRenderer.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CanvasRenderer({\n  canvasRef,\n  playerRef,\n  bulletsRef,\n  startTimeRef,\n  gameOverRef,\n  isHit,\n  CANVAS_WIDTH,\n  CANVAS_HEIGHT,\n  PLAYER_SIZE,\n  BULLET_RADIUS,\n  update\n}) {\n  _s();\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas === null || canvas === void 0 ? void 0 : canvas.getContext('2d');\n    if (!canvas || !ctx) return;\n    function draw() {\n      ctx.fillStyle = \"#18181b\";\n      ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n      ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n      if (isHit) {\n        ctx.save();\n        ctx.globalAlpha = 0.5;\n        ctx.fillStyle = \"#f00\";\n        ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n        ctx.restore();\n      }\n      ctx.fillStyle = \"#00f\";\n      ctx.fillRect(playerRef.current.x, playerRef.current.y, PLAYER_SIZE, PLAYER_SIZE);\n      ctx.fillStyle = \"#f00\";\n      bulletsRef.current.forEach(b => {\n        ctx.beginPath();\n        ctx.arc(b.x, b.y, BULLET_RADIUS, 0, Math.PI * 2);\n        ctx.fill();\n      });\n      const elapsedSec = Math.floor((Date.now() - startTimeRef.current) / 1000);\n      ctx.fillStyle = \"#fff\";\n      ctx.font = \"16px monospace\";\n      ctx.fillText(`Survived: ${elapsedSec}s`, 10, 20);\n      if (gameOverRef.current) {\n        ctx.fillStyle = \"#fff\";\n        ctx.font = \"bold 32px monospace\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"GAME OVER\", CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2);\n        ctx.font = \"16px monospace\";\n        ctx.fillText(\"Press R to Restart\", CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2 + 30);\n      }\n    }\n    function gameLoop() {\n      update();\n      draw();\n      if (!gameOverRef.current.current) {\n        requestAnimationFrame(gameLoop);\n      }\n    }\n    gameLoop();\n  }, [canvasRef, playerRef, bulletsRef, startTimeRef, gameOverRef, isHit, CANVAS_WIDTH, CANVAS_HEIGHT, PLAYER_SIZE, BULLET_RADIUS, update]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    width: CANVAS_WIDTH,\n    height: CANVAS_HEIGHT,\n    style: {\n      display: 'block',\n      margin: '0 auto',\n      background: '#18181b',\n      border: '2px solid #222',\n      maxWidth: 480,\n      height: 640\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n_s(CanvasRenderer, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = CanvasRenderer;\nvar _c;\n$RefreshReg$(_c, \"CanvasRenderer\");","map":{"version":3,"names":["useEffect","jsxDEV","_jsxDEV","CanvasRenderer","canvasRef","playerRef","bulletsRef","startTimeRef","gameOverRef","isHit","CANVAS_WIDTH","CANVAS_HEIGHT","PLAYER_SIZE","BULLET_RADIUS","update","_s","canvas","current","ctx","getContext","draw","fillStyle","fillRect","clearRect","save","globalAlpha","restore","x","y","forEach","b","beginPath","arc","Math","PI","fill","elapsedSec","floor","Date","now","font","fillText","textAlign","gameLoop","requestAnimationFrame","ref","width","height","style","display","margin","background","border","maxWidth","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/kbk-admin/one-more-second/src/pages/Game/components/CanvasRenderer.tsx"],"sourcesContent":["import { useEffect } from 'react';\n\ninterface CanvasRendererProps {\n  canvasRef: React.RefObject<HTMLCanvasElement | null>;\n  playerRef: React.MutableRefObject<{ x: number; y: number }>;\n  bulletsRef: React.MutableRefObject<any[]>;\n  startTimeRef: React.MutableRefObject<number>;\n  gameOverRef: React.MutableRefObject<boolean>;\n  isHit: boolean;\n  CANVAS_WIDTH: number;\n  CANVAS_HEIGHT: number;\n  PLAYER_SIZE: number;\n  BULLET_RADIUS: number;\n  update: () => void;\n}\n\nexport default function CanvasRenderer({\n  canvasRef,\n  playerRef,\n  bulletsRef,\n  startTimeRef,\n  gameOverRef,\n  isHit,\n  CANVAS_WIDTH,\n  CANVAS_HEIGHT,\n  PLAYER_SIZE,\n  BULLET_RADIUS,\n  update\n}: CanvasRendererProps) {\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    const ctx = canvas?.getContext('2d');\n    if (!canvas || !ctx) return;\n\n    function draw() {\n      ctx.fillStyle = \"#18181b\";\n      ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n      ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n\n      if (isHit) {\n        ctx.save();\n        ctx.globalAlpha = 0.5;\n        ctx.fillStyle = \"#f00\";\n        ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n        ctx.restore();\n      }\n\n      ctx.fillStyle = \"#00f\";\n      ctx.fillRect(playerRef.current.x, playerRef.current.y, PLAYER_SIZE, PLAYER_SIZE);\n\n      ctx.fillStyle = \"#f00\";\n      bulletsRef.current.forEach((b) => {\n        ctx.beginPath();\n        ctx.arc(b.x, b.y, BULLET_RADIUS, 0, Math.PI * 2);\n        ctx.fill();\n      });\n\n      const elapsedSec = Math.floor((Date.now() - startTimeRef.current) / 1000);\n      ctx.fillStyle = \"#fff\";\n      ctx.font = \"16px monospace\";\n      ctx.fillText(`Survived: ${elapsedSec}s`, 10, 20);\n\n      if (gameOverRef.current) {\n        ctx.fillStyle = \"#fff\";\n        ctx.font = \"bold 32px monospace\";\n        ctx.textAlign = \"center\";\n        ctx.fillText(\"GAME OVER\", CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2);\n        ctx.font = \"16px monospace\";\n        ctx.fillText(\"Press R to Restart\", CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2 + 30);\n      }\n    }\n\n    function gameLoop() {\n      update();\n      draw();\n      if (!gameOverRef.current.current) {\n        requestAnimationFrame(gameLoop);\n      }\n    }\n\n    gameLoop();\n  }, [canvasRef, playerRef, bulletsRef, startTimeRef, gameOverRef, isHit, CANVAS_WIDTH, CANVAS_HEIGHT, PLAYER_SIZE, BULLET_RADIUS, update]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={CANVAS_WIDTH}\n      height={CANVAS_HEIGHT}\n      style={{\n        display: 'block',\n        margin: '0 auto',\n        background: '#18181b',\n        border: '2px solid #222',\n        maxWidth: 480,\n        height: 640\n      }}\n    />\n  );\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}